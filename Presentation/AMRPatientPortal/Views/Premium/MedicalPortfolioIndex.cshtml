@using AMR.Models;
@using AMR.Core.Extensions;
@using System.Text;
@using System.Web.Script.Serialization;
@using System.Web.Optimization;
@model PremiumMedicalPortfolioViewModel

@{
    ViewBag.Title = "MedicalPortfolioIndex";
    Layout = "~/Views/Shared/_LayoutMasterPage.cshtml";
}

@Styles.Render("~/MedicalPortfolioIndex/css")



@section Scripts
{ 
  
    <script>
       
        function ViewVisitRecord(visitId,facilityId)
        {

            chkAccess();
            var page1 = '';

            //alert(visitId);

            page1 = "@Url.Action("ClinicalSummaryPrint", "ClinicalSummary")"+"/?visitId=" + visitId + "&facilityId=" + facilityId;

            $('#clinical-print').remove();
            var $dialog = $('<div id="clinical-print" style="width:1000px;"></div>')
                           .html('<div id="page_loader1" style="display: block;"><div id="apDiv1" align="center"><table width="200" border="0" cellspacing="0" cellpadding="0"><tr><td height="70px;">&nbsp;</td></tr><tr><td align="center"><img src="Content/img/image_559926.gif" width="128" height="64" /></td></tr><tr><td style="text-align: center;" height="70px;">Please wait ...</td></tr></table></div></div><iframe id="iframeVisitReport" onload="processingComplete();" style="border: 0px; " src="' + page1 + '" width="100%" height="100%"></iframe>')
                           .dialog({
                               autoOpen: false,
                               show: {
                                   effect: "blind",
                                   duration: 100
                               },
                               hide: {
                                   effect: "blind",
                                   duration: 100
                               },
                               modal: true,
                               height: 600,
                               width: 1050,
                               title: "Print Clinical Summary"
                           });
            $dialog.dialog('open');
        }

    </script>

   
}
 @{
       AMR.Controllers.Controllers.Base.BaseController bc1 = new AMR.Controllers.Controllers.Base.BaseController();
       AMR.Models.PatientRepModel patRep = bc1.GetRepData();
          }  
<!--1st grid for HealthCareDataExchange records-->
<div id="#" class="draggable ui-widget-content ui-corner-all" style="position: relative; top: 5px; height: 244px; left: 0px; margin-right:-15px; width: 98.5%;">
                <div id="cart1" style="position: absolute; top: 1px; left: 0px; right: 0px;" class="ui-corner-all">
                    <h5 class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"
                        style="margin-top: -1px; font-weight: bold; padding: 3px;">HealthCare Data Exchange
                    </h5>
                    <div id="HealthCareDataExchange-portlet" class="ui-widget-content" style="position: relative; top: -9px; border: none;  height: 209px; overflow-x: auto;">
                       @Html.Partial("~/Views/Templates/MedicalPortfolio/_HealthCareDataExchange.cshtml",Model.PatientVisit)
                    </div>
                </div>
            </div> 
<!--1st grid end-->

<!--2nd grid for dr's records-->
<div id="#" class="draggable ui-widget-content ui-corner-all" style="position: relative; top: 5px; height: 244px; left: 0px; margin-right:-15px; width: 98.5%;">
                <div id="cart1" style="position: absolute; top: 1px; left: 0px; right: 0px;" class="ui-corner-all">
                    <h5 class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"
                        style="margin-top: -1px; font-weight: bold; padding: 3px;">All Other Dr.'s records
                    </h5>
                    <div id="DrsRecords-portlet" class="ui-widget-content" style="position: relative; top: -9px; border: none;  height: 209px; overflow-x: auto;">
                         @Html.Partial("~/Views/Templates/MedicalPortfolio/_PatientOutsideDoctors.cshtml",Model.OutsideDoctor)
                    </div>
                </div>
            </div>   

<!--2nd grid end-->
@if(AMR.Core.Utilities.RequestHelper.MyGlobalVar.UserLoginEx.StartsWith("R")){
if (patRep.ClinicalDoc == true )
{
<!--3rd grid for MyMedical records-->
<div id="#" class="draggable ui-widget-content ui-corner-all" style="position: relative; top: 5px; height: 244px; left: 0px; margin-right:-15px; width: 98.5%;">
                <div id="cart1" style="position: absolute; top: 1px; left: 0px; right: 0px;" class="ui-corner-all">
                    <h5 class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"
                        style="margin-top: -1px; font-weight: bold; padding: 3px;">My Medical Documents                  
                         <!-- first ICON -->
                        <div id="" onclick="SavePatientMedicalDocument();" onfocus="removing_class();" onmouseup="removing_class();" onmouseout="removing_class();" onmousedown="removing_class();" onmouseover="removing_class();" onmousemove="removing_class();" onclick="clearFields();" role="button" aria-disabled="false" style="cursor: pointer; float: right; width: auto; height: 20px;">
                            <img src="Content/img/add.png" />
                            <span class="anc" style="padding-right: 4px;">Add</span>
                        </div>
                        <!-- end of first icon-->
                        


                    </h5>
                    <div id="PatientMedicalDocument-portlet" class="ui-widget-content" style="position: relative; top: -9px; border: none;  height: 209px; overflow-x: auto;">
                        @Html.Partial("~/Views/Templates/MedicalPortfolio/_PatientMedicalDocument.cshtml",Model.PatientDocument)
                    </div>
                </div>
            </div>   

<!--3rd grid end-->
} }
else
{

<!--3rd grid for MyMedical records-->
<div id="#" class="draggable ui-widget-content ui-corner-all" style="position: relative; top: 5px; height: 244px; left: 0px; margin-right:-15px; width: 98.5%;">
                <div id="cart1" style="position: absolute; top: 1px; left: 0px; right: 0px;" class="ui-corner-all">
                    <h5 class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"
                        style="margin-top: -1px; font-weight: bold; padding: 3px;">My Medical Documents                  
                         <!-- first ICON -->
                        <div id="" onclick="SavePatientMedicalDocument();" onfocus="removing_class();" onmouseup="removing_class();" onmouseout="removing_class();" onmousedown="removing_class();" onmouseover="removing_class();" onmousemove="removing_class();" onclick="clearFields();" role="button" aria-disabled="false" style="cursor: pointer; float: right; width: auto; height: 20px;">
                            <img src="Content/img/add.png" />
                            <span class="anc" style="padding-right: 4px;">Add</span>
                        </div>
                        <!-- end of first icon-->
                        


                    </h5>
                    <div id="PatientMedicalDocument-portlet" class="ui-widget-content" style="position: relative; top: -9px; border: none;  height: 209px; overflow-x: auto;">
                        @Html.Partial("~/Views/Templates/MedicalPortfolio/_PatientMedicalDocument.cshtml",Model.PatientDocument)
                    </div>
                </div>
            </div>   

<!--3rd grid end-->


}
<!--pop up start MyMedicalDocument-->
<div id="form-Save-Medical-Document" title="Medical Documents Upload" style="overflow:hidden;">
    <center>  <span   class="validateTips"></span></center>
    <table cellpadding="3">
        <tr>
            <td >Select Documents:</td>
            <td >
                <input id="file_upload" type="file" value="" name="file_upload" style="display:none;"/>
               @* <p style="margin:0px; padding:0px;">*@
                    <input type="button" value="Browse..." id="btnBrowseFile" style="margin-top:-15px; display:inline-block; width:100px;" />
                    <span id="fileName" style="width:415px;"></span>
                @*</p>*@
                
            </td>
        </tr>

        <tr>
            <td>Document Type: </td>
            <td><input type="text" id="txtDocumentDescription" width="50px;" class="txt" style="width:300px"/></td>
        </tr>
        <tr>
            <td>Facility: </td>
            <td><input type="text" id="txtFacilityName" width="50px;" class="txt" style="width:300px"/></td>
        </tr>
        <tr>
            <td>Physician: </td>
            <td><input type="text" id="txtDoctorName" width="50px;" class="txt" style="width:300px"/></td>
        </tr>
        <tr>
            <td>Comments: </td>
            <td><textarea id="txtNotes" style="width:300px; height:70px;" class="txt" ></textarea></td>
        </tr>
        <tr>
            <td>Viewable: </td>
            <td><input type="checkbox" id="chkViewable" /></td>
        </tr>
    </table>
</div>
<input type="hidden" id="hdnPatientDocumentData" name="hdnPatientDocumentData" value=""/>
<!--End of popup MyMedicalDocument-->


<!--pop up start MyMedicalDocument-->
<div id="form-Edit-Medical-Document" title="Edit Patient Medical Documents Upload" style="overflow:hidden;">
    <center>  <span   class="validateTips"></span></center>
    <table cellpadding="3">
        <tr>
            <td>DocumentType: </td>
            <td><input type="text" id="txtEditDocumentDescription" width="50px;" class="txt" style="width:300px"/></td>
        </tr>
        <tr>
            <td>Facilty: </td>
            <td><input type="text" id="txtEditFacilityName" width="50px;" class="txt" style="width:300px"/></td>
        </tr>
        <tr>
            <td>Physician: </td>
            <td><input type="text" id="txtEditDoctorName" width="50px;" class="txt" style="width:300px"/></td>
        </tr>
        <tr>
            <td>Comments: </td>
            <td><textarea id="txtEditNotes" style="width:300px; height:70px;" class="txt" ></textarea></td>
        </tr>
        <tr>
            <td>Viewable: </td>
            <td><input type="checkbox" id="chkEditViewable" /></td>
        </tr>
    </table>
</div>
<input type="hidden" id="hdnPatientDocumentId" name="hdnPatientDocumentId" value=""/>
<!--End of popup MyMedicalDocument-->


<!-- Start Office Document Iframe Page -->
<div id="divOfficeDocIframe" style="display:none;">
    <iframe id="iframeViewAttachment" onload="HideLoaderReportViewer();" style="border: 0px;" src="" width="100%" height="100%"></iframe>
</div>
<!-- Start Office Document Iframe Page -->




@Scripts.Render("~/MedicalPortfolioIndex/jquery")