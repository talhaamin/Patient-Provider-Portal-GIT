@model IEnumerable<AMR.Models.FamilyHistoryModel>
@using System.Text;
@using System.Web.Script.Serialization;

<table class="box-table-a" id="tab-FamilyHistory" summary="Appointments">
                            <thead>
                                <tr>

                                    <th scope="col">Relationship</th>
                                    <th scope="col">Condition Description</th>                               
                                    <th scope="col" style="text-align:center;" class="showHideThis">Edit</th>
                                    <th scope="col" style="text-align:center;">Details</th>
                                    <th scope="col" style="text-align:center;" class="showHideThis">Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model != null && Model.Count() > 0)
                                {
                                    int counter=0;
                                    foreach (var item in Model)
                                    {
                                        
                                        string desc = item.Description.Replace("'", "`");
                                        StringBuilder jsonStringFamily = new StringBuilder();

                                        jsonStringFamily.Append(" { ");
                                        jsonStringFamily.Append("\"PatFamilyHistCntr\": \"" + item.PatFamilyHistCntr + "\",");
                                        jsonStringFamily.Append("\"RelationshipId\": \"" + item.RelationshipId + "\",");
                                        jsonStringFamily.Append("\"ConditionStatusId\": \"" + item.ConditionStatusId + "\",");
                                        jsonStringFamily.Append("\"Description\":  \"" + desc + "\",");
                                        jsonStringFamily.Append("\"CodeValue\":  \"" + item.CodeValue + "\",");
                                        jsonStringFamily.Append("\"DateReported\":  \"" + item.DateReported + "\",");
                                        jsonStringFamily.Append("\"Note\":  \"" + item.Note + "\",");
                                        jsonStringFamily.Append("\"AgeAtOnset\":  \"" + item.AgeAtOnset + "\",");
                                        jsonStringFamily.Append("\"DiseasedAge\":  \"" + (item.DiseasedAge) + "\",");
                                        jsonStringFamily.Append("\"Diseased\":  \"" + (item.Diseased) + "\",");
                                        jsonStringFamily.Append("\"FamilyMember\":  \"" + item.SNOMEDCode + "\"");


                                        jsonStringFamily.Append("}");
                                        
                                    
                                        //var jsonStr = new JavaScriptSerializer().Serialize(item);
                                        <tr class="@((counter % 2 == 0) ? "r1" : "r0")">

                                            <td><input type="hidden" id="@(item.PatFamilyHistCntr)" value="@jsonStringFamily.ToString()" />@item.FamilyMember</td>
                                            <td>@item.Description</td>                           


                                            <td align="center" class="showHideThis">
                                                            <img onclick="familyHistoryEdit(@item.PatFamilyHistCntr);"   src="Content/img/edit.png" />
                                                        </td>
                                                        <td align="center">
                                                            <img  onclick="familyHistoryDetails(@item.PatFamilyHistCntr); "  src="Content/img/details.png" />
                                                        </td>
                                                        <td align="center" class="showHideThis">
                                                            <img  onclick="familyHistoryDelete(@item.PatFamilyHistCntr); "  src="Content/img/delete.png" />
                                                        </td>
                                        </tr>
                                        counter++;
                                    }
                                }
                                else
                                {
                                     <tr>
                                <td width="200px;">No Information Available.</td>
                            </tr>
                                }
                            </tbody>
</table>

