@using AMR.Models;
@using AMR.Core.Extensions;
@using System.Text;
@model HomeViewModel

@{
    ViewBag.Title = "Payment Transfer";
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
       <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
     <link rel="stylesheet" href="@Url.Content("~/Content/css/themes/redmond/jquery-ui.css")" />
    <link href="@Url.Content("~/Content/css/themes/redmond/jquery-ui-1.10.3.custom.css")" rel="stylesheet">
   
    <script src="@Url.Content("~/Content/css/ui/jquery.ui.core.js")"></script>
	<script src="@Url.Content("~/Content/css/ui/jquery.ui.widget.js")"></script>
	<script src="@Url.Content("~/Content/css/ui/jquery.ui.accordion.js")"></script>
    <script src="@Url.Content("~/Content/js/jquery-1.9.1.js")"></script>
    <script src="@Url.Content("~/Content/js/jquery-1.9.2.custom.js")"></script>
    <script src="@Url.Content("~/Content/js/jquery-ui.js")"></script>
    <script src="@Url.Content("~/Content/js/jquery.maskedinput.min.js")"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.8/jquery.validate.min.js" type="text/javascript"></script>

    
    
    <title>@ViewBag.Title</title>
    <script type="text/javascript">

        $(document).ready(function () {
          
                
                var date = new Date();
                var dat = date.getDate();
                var month = date.getMonth() + 1;
                var year = date.getFullYear();
                if (month < 10) { month = '0' + month; }
                var currentdate = month + '-' + dat + '-' + year;
             
                $('input[name=StartDate]').val(currentdate);
                $('input[name=Amount]').val(parseFloat('@Model.Billrate.Rate').toFixed(2));
                $('input[name=WalletDescription]').val(parseFloat('@Model.Billrate.BillRateId').toFixed(2));
                var phone = '@Model.Patient.HomePhone';
                phone = phone.replace('(', '');
                phone = phone.replace(')', '-');
                phone = phone.replace(' ', '');
                $('input[name=PhoneNumber]').val(phone);
               

                $('#form').submit();
           
                //alert("hi form is submitted");

        });
       
    </script>
</head>
<body >
   
       @if (AMR.Core.Utilities.RequestHelper.MyGlobalVar.PatientId != null || AMR.Core.Utilities.RequestHelper.MyGlobalVar.PatientId !='0')
       {
          <div id="PaymentTransfer">
    <form  id="form" action="https://hosted.cert.transactionexpress.com/Transaction/Transaction/Index" method ="POST" >

<input type="hidden" name="HostedKey" id="HostedKey" value="b84dfc2d-28db-4bce-9466-e16fc32418b1" />

<input type="hidden" name="Gateway_ID" id="Gateway_ID" value="7777777957" />

<input type="hidden" name="IndustryCode" id="IndustryCode" value="2" />

<input type="hidden" name="Amount" id="Amount"   value="" />

<input type="hidden" name="RecurringType" id="RecurringType" value="A" />

<input type="hidden" name="RecurringAmount" id="RecurringAmount" value="20.00" />

<input type="hidden" name="RURL" id="RURL" value="http://localhost:60731/PremiumPay" />

<input type="hidden" name="CURL" id="CURL" value="https://www.amrportal.com/" />

<input type="hidden" name="AVSRequired" id="AVSRequired" value="Y"/>

<input type="hidden" name="CVV2Required" id="CVV2Required"value="Y"/>

<input type="hidden" name="EmailRequired" id="EmailRequired" value="Y"/>

<input type="hidden" name="PostRspMsg" id="PostRspMsg" value="Y"/>

<input type="hidden" name="SECCode" id="SECCode"  value="2" />

<input type="hidden" name="Descriptor" id="Descriptor" value="Subscripti" />

<input type="hidden" name="PaymentType" id="PaymentType" value="CC"/>

<input type="hidden" name="CustRefID" id="CustRefID" value="@AMR.Core.Utilities.RequestHelper.MyGlobalVar.PatientId"/>

<input type="hidden" name="FullName" id="FullName"  value="@Model.Patient.FirstName @Model.Patient.LastName" />

<input type="hidden" name="Address1" id="Address1"  value="@Model.Patient.Address1" />

<input type="hidden" name="Address2" id="Address2"  value="@Model.Patient.Address2" />

<input type="hidden" name="City" id="City"  value="@Model.Patient.City" />

<input type="hidden" name="State" id="State"  value="@Model.Patient.State" />

<input type="hidden" name="Zip" id="Zip"  value="@Model.Patient.Zip" />

<input type="hidden" name="PhoneNumber" id="PhoneNumber"  value="" />

<input type="hidden" name="Email" id="Email"  value="@Model.Patient.EMail" />

<input type="hidden" name="WalletDescription" id="WalletDescription" value="" />

<input type="hidden" name="PaymentFrequency" id="PaymentFrequency" value="80" />

<input type="hidden" name="NumberOfPayments" id="NumberOfPayments" value="99" />

<input type="hidden" name="StartDate" id="StartDate" value="" />

<input type="hidden" name="TaxIndicator" id="TaxIndicator"  value="0" />

<input type="hidden" name="TaxAmount" id="TaxAmount"  value="" />

<input type="hidden" name="PONumber" id="PONumber"  value="" />

<input type="Submit" name="Submit" id="Submit" value="Pay Now" style=" display:none;" />

</form>
              </div>
       }
      
</body>
</html>
