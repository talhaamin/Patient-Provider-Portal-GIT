@model IEnumerable<AMR.Models.ProblemModel>
@using System.Text;
<table class="box-table-a" id="tbl-Problems" summary="Appointments">
                    <thead>
                        <tr>
                            <th scope="col" style="vertical-align:middle"><span style="margin-left:2px;">Onset Date</span></th>
                            <th scope="col" style="vertical-align:middle"><span style="margin-left:-3px;">Description</span></th>

                        </tr>
                    </thead>
                    <tbody>
                        @if (Model != null && Model.Count() > 0)
                        {
                            int counter=0;
                            foreach (var item in Model)
                              {
                                  StringBuilder jsonStringProblem = new StringBuilder();
                                                           
                                                    
                                  jsonStringProblem.Append(" { ");
                                  jsonStringProblem.Append("\"PatientProblemCntr\": \"" + item.PatientProblemCntr + "\",");
                                  jsonStringProblem.Append("\"EffectiveDate\": \"" + item.EffectiveDate + "\",");
                                  jsonStringProblem.Append("\"LastChangeDate\": \"" + item.LastChangeDate + "\",");
                                  jsonStringProblem.Append("\"Note\": \"" + item.Note + "\",");
                                  jsonStringProblem.Append("\"CodeValue\":  \"" + item.CodeValue + "\",");
                                  jsonStringProblem.Append("\"Condition\":  \"" + item.Condition + "\",");
                                  jsonStringProblem.Append("\"ConditionStatusId\":  \"" + item.ConditionStatusId + "\"");
                                  jsonStringProblem.Append("}");
                                    <tr class="@((counter % 2 == 0) ? "r1" : "r0")" onclick="OpenProblemRecord(@item.PatientProblemCntr);">
                                         @{
                                    DateTime dtexDate;
                                    if (item.EffectiveDate.Length == 8 && DateTime.TryParseExact(item.EffectiveDate, "yyyyMMdd", System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out dtexDate))
                                    {
                                        DateTime dtEff = DateTime.ParseExact(item.EffectiveDate, "yyyyMMdd", null);
                                        string s = dtEff.ToString("MM/dd/yyyy");

                                        <td style="vertical-align:middle"><input type="hidden" id="hdProblem-@item.PatientProblemCntr" value="@jsonStringProblem.ToString()" />@s</td>
                                    }



                                    else if ((item.EffectiveDate).Trim().Length == 6)
                                    {
                                        string strYear = item.EffectiveDate.Substring(0, 4);
                                        string strMonth = item.EffectiveDate.Substring(4, 2);
                                        string strEffectiveDate = strMonth + "/" + strYear;
                                        <td style="vertical-align:middle"><input type="hidden" id="hdProblem-@item.PatientProblemCntr" value="@jsonStringProblem.ToString()" />@strEffectiveDate</td>
                                    }
                                    else
                                    {
                                        <td style="vertical-align:middle"><input type="hidden" id="hdProblem-@item.PatientProblemCntr" value="@jsonStringProblem.ToString()" />@item.EffectiveDate</td>
                                    }
                                                   
                                                   
                                    }
                                        <td style="vertical-align:middle">@item.Condition</td>
                                    </tr>
                                  counter++;
                              }
                        }
                        else
                        {
                             <tr>
                                <td width="200px;" style="vertical-align:middle">No Information Available.</td>
                            </tr>
                        }
                    </tbody>
</table>

